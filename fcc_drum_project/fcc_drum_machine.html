<!DOCTYPE html>
<html>
  <head>
    <!--meta below for testing slider-->
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <script src="https://unpkg.com/react@17/umd/react.development.js" crossorigin></script>
    <script src="https://unpkg.com/react-dom@17/umd/react-dom.development.js" crossorigin></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <!--Font awesome-->
    <link rel="stylesheet" href="https://pro.fontawesome.com/releases/v5.13.0/css/all.css">
    <!--Bootstrap CSS link-->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
    <!-- Bootstrap JS link-->
    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>
    <!--bootstrap toggle added below. don't need. changed to different component
    <link href="https://gitcdn.github.io/bootstrap-toggle/2.2.2/css/bootstrap-toggle.min.css" rel="stylesheet">
    <script src="https://gitcdn.github.io/bootstrap-toggle/2.2.2/js/bootstrap-toggle.min.js"></script>
    -->
    <style>
        /* commenting out this part to test with ems instead of fr
        .grid-container {
            display: grid;
            grid-template-columns: 1fr 1fr 1fr;
            grid-template-rows: 1fr 1fr 1fr;
            grid-gap: 10px;

            background-color: #2196F3;
            padding: 0px;
            margin: 0px;
        }
        */
        p {
            font-size: 2em;
            text-align: center;
        }
        /*
        span {
            display: inline-block;
            vertical-align: middle;
            line-height: normal;
        }
        */

        .grid-container {
            display: grid;
            grid-template-columns: 6em 6em 6em;
            grid-template-rows: 6em 6em 6em;
            grid-gap: 10px;

            background-color: #2196F3;
            padding: 0px;
            margin: 0px;
        }
        .drum-pad {
            /*display: inline-block; */
            /*vertical-align: middle; */
            background-color: gray;
            border-radius: 10%;
            box-shadow: 0.2em 0.2em;

            font-size: 2em;
            text-align: center;
            line-height: 3em;
            
        }
        #display {
            background-color: black;
            color: white;
            width: 100%;
            text-align: right;
            height: 60px;
            margin: 0px;
            padding: 0px;
        }
        .drum-pad {
            width: 100%;
            height: 100%;
        }
        .item1 {
            grid-area: 1/1/2/2;
        }
        .item2 {
            grid-area: 1/2/2/3;
        }
        .item3 {
            grid-area: 1/3/2/4;
        }
        .item4 {
            grid-area: 2/1/3/2;
        }
        .item5 {
            grid-area: 2/2/3/3;
        }
        .item6 {
            grid-area: 2/3/3/4;
        }
        .item7 {
            grid-area: 3/1/4/2;
        }
        .item8 {
            grid-area: 3/2/4/3;
        }
        .item9 {
            grid-area: 3/3/4/4;
        }
        
        /*CSS for sliding switch */
        /*
        .powerSwitch {
            position: relative;
            display: inline-block;
            width: 60px;
            height: 34px;
        }

        .powerSwitch input { 
            opacity: 0;
            width: 0;
            height: 0;
        }

        .slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: #ccc;
            -webkit-transition: .4s;
            transition: .4s;
        }

        .slider:before {
            position: absolute;
            content: "";
            height: 26px;
            width: 26px;
            left: 4px;
            bottom: 4px;
            background-color: white;
            -webkit-transition: .4s;
            transition: .4s;
        }

        input:checked + .slider {
            background-color: #2196F3;
        }

        input:focus + .slider {
            box-shadow: 0 0 1px #2196F3;
        }

        input:checked + .slider:before {
            -webkit-transform: translateX(26px);
            -ms-transform: translateX(26px);
            transform: translateX(26px);
        }

        */  
        /* Rounded sliders */
        /*
        .slider.round {
            border-radius: 34px;
        }

        .slider.round:before {
            border-radius: 50%;
        }
        */
        .muted {
            font-size: 1.5em;
            background-color: red;
            border-radius: 50%;
            width: 1.7em;
            height: 1.7em;
            text-align: center;
            line-height: 1.7em;
        }
        .on{
            font-size: 1.5em;
            background-color: blue;
            border-radius: 50%;
            width: 1.7em;
            height: 1.7em;
            text-align: center;
            line-height: 1.7em;
        }
        #drumBody {
            margin-bottom: 50em;
        }
        
    </style>
  </head>
  <body>
    <p>Test words</p>
    <div id="drumBody"></div>
    <!--testing toggle outside react-->
    <label class="powerSwitch">
        <input type="checkbox" checked />
        <span class="slider round"></span>
    </label>
    <script type="text/babel">
        let muteClass = "fas fa-volume-mute muted"; 
        let volumeOnClass = "fas fa-volume-up on";
        let qValueArr = ["Q Drum", "Q Piano", "Q Flute"];
        let qLinkArr = ["https://s3.amazonaws.com/freecodecamp/drums/Heater-1.mp3", "https://s3.amazonaws.com/freecodecamp/drums/Chord_1.mp3", "#"];
        let wValueArr = ["W Drum", "W Piano", "Q Flute"];
        let wLinkArr = ["https://s3.amazonaws.com/freecodecamp/drums/Heater-2.mp3", "https://s3.amazonaws.com/freecodecamp/drums/Chord_2.mp3", "#"];
        let eValueArr = ["E Drum", "E Piano", "Q Flute"];
        let eLinkArr = ["https://s3.amazonaws.com/freecodecamp/drums/Heater-3.mp3", "https://s3.amazonaws.com/freecodecamp/drums/Chord_3.mp3", "#"];
        let aValueArr = ["A Drum", "A Piano", "Q Flute"];
        let aLinkArr = ["https://s3.amazonaws.com/freecodecamp/drums/Heater-4_1.mp3", "https://s3.amazonaws.com/freecodecamp/drums/Give_us_a_light.mp3", "#"];
        let sValueArr = ["S Drum", "S Piano", "Q Flute"];
        let sLinkArr = ["https://s3.amazonaws.com/freecodecamp/drums/Heater-6.mp3", "https://s3.amazonaws.com/freecodecamp/drums/Dry_Ohh.mp3", "#"];
        let dValueArr = ["D Drum", "D Piano", "Q Flute"];
        let dLinkArr = ["https://s3.amazonaws.com/freecodecamp/drums/Dsc_Oh.mp3", "https://s3.amazonaws.com/freecodecamp/drums/Bld_H1.mp3", "#"];
        let zValueArr = ["Z Drum", "Z Piano", "Q Flute"];
        let zLinkArr = ["https://s3.amazonaws.com/freecodecamp/drums/Kick_n_Hat.mp3", "https://s3.amazonaws.com/freecodecamp/drums/punchy_kick_1.mp3", "#"];
        let xValueArr = ["X Drum", "X Piano", "Q Flute"];
        let xLinkArr = ["https://s3.amazonaws.com/freecodecamp/drums/RP4_KICK_1.mp3", "https://s3.amazonaws.com/freecodecamp/drums/side_stick_1.mp3", "#"];
        let cValueArr = ["C Drum", "C Piano", "Q Flute"];
        let cLinkArr = ["https://s3.amazonaws.com/freecodecamp/drums/Cev_H2.mp3", "https://s3.amazonaws.com/freecodecamp/drums/Brk_Snr.mp3", "#"];
        let instrumentArr = ["Drums", "Piano", "Q Flute"];


        let play = function(){document.getElementById("audio").play()};


        class DrumMachine extends React.Component {

            constructor(props) {

                super(props);

                this.state = {
                    power: true,
                    instrument: instrumentArr[0],
                    bank: 0,
                    instrumentIndex: 0,
                    volumeLevel: 0.5, 
                    volumeDisplay: 50,
                    chord: "",
                    displayValue: "",

                    qValue: qValueArr[0], 
                    qLink: qLinkArr[0],
                    wValue: wValueArr[0], 
                    wLink: wLinkArr[0],
                    eValue: eValueArr[0], 
                    eLink: eLinkArr[0],

                    aValue: aValueArr[0], 
                    aLink: aLinkArr[0],
                    sValue: sValueArr[0], 
                    sLink: sLinkArr[0],
                    dValue: dValueArr[0], 
                    dLink: dLinkArr[0],

                    zValue: zValueArr[0], 
                    zLink: zLinkArr[0],
                    xValue: xValueArr[0], 
                    xLink: xLinkArr[0],
                    cValue: cValueArr[0], 
                    cLink: cLinkArr[0],
                    powerClass: volumeOnClass
           

                };

                this.padClick = this.padClick.bind(this);
                //this.keyClick = this.keyClick.bind(this);
                this.keyPressFunction = this.keyPressFunction.bind(this);
                this.testFunction = this.testFunction.bind(this);
                this.muteFunction = this.muteFunction.bind(this);
                this.setVolume = this.setVolume.bind(this);
                //this.setInstrument = this.setInstrument.bind(this);

            }
            //Adding event listeners withcomponentDidMount
            componentDidMount() {
                // When the component is mounted, add your DOM listener to the "nv" elem.
                // (The "nv" elem is assigned in the render function.)
                document.getElementById(this.state.qValue).addEventListener("click", this.padClick);
                document.getElementById(this.state.wValue).addEventListener("click", this.padClick);
                document.getElementById(this.state.eValue).addEventListener("click", this.padClick);
                document.getElementById(this.state.aValue).addEventListener("click", this.padClick);
                document.getElementById(this.state.sValue).addEventListener("click", this.padClick);
                document.getElementById(this.state.dValue).addEventListener("click", this.padClick);
                document.getElementById(this.state.zValue).addEventListener("click", this.padClick);
                document.getElementById(this.state.xValue).addEventListener("click", this.padClick);
                document.getElementById(this.state.cValue).addEventListener("click", this.padClick);
                document.getElementById("powerButton").addEventListener("click", this.muteFunction );
                window.addEventListener("keydown", this.keyPressFunction);
            }
            componentWillUnmount() {
                // Make sure to remove the DOM listener when the component is unmounted.
                //this.nv.removeEventListener("nv-enter", this.handleNvEnter);
                document.getElementById(this.state.qValue).removeEventListener("click", this.padClick);
                document.getElementById(this.state.wValue).removeEventListener("click", this.padClick);
                document.getElementById(this.state.eValue).removeEventListener("click", this.padClick);
                document.getElementById(this.state.aValue).removeEventListener("click", this.padClick);
                document.getElementById(this.state.sValue).removeEventListener("click", this.padClick);
                document.getElementById(this.state.dValue).removeEventListener("click", this.padClick);
                document.getElementById(this.state.zValue).removeEventListener("click", this.padClick);
                document.getElementById(this.state.xValue).removeEventListener("click", this.padClick);
                document.getElementById(this.state.cValue).removeEventListener("click", this.padClick);
                window.removeEventListener("keydown", this.keyPressFunction);
            }
            muteFunction (event) {
                let qElement = document.getElementById(this.state.qValue);
                let wElement = document.getElementById(this.state.wValue);
                let eElement = document.getElementById(this.state.eValue);
                let aElement = document.getElementById(this.state.aValue);
                let sElement = document.getElementById(this.state.sValue);
                let dElement = document.getElementById(this.state.dValue);
                let zElement = document.getElementById(this.state.zValue);
                let xElement = document.getElementById(this.state.xValue);
                let cElement = document.getElementById(this.state.cValue);
                if(this.state.power){
                    this.setState((state, props) =>({
                        power: false,
                        powerClass: muteClass,
                        displayValue: "MUTED"
                    }));
                } else {
                    
                    this.setState((state, props) =>({
                        power: true,
                        powerClass: volumeOnClass,
                        displayValue: ""
                    }));
                }

            }
            setVolume (event){
                //var player = document.getElementById('video');
                //console.log('Before: ' + player.volume);
               // player.volume = val / 100;
                //console.log('After: ' + player.volume);
                this.setState((state, props) => ({
                    volumeLevel: event.target.value / 100,
                    volumeDisplay: event.target.value
                }))
            }
            testFunction (event){
                alert(this.state.eValue)
            }
            //old function. probably useless
            /*
            keyClick (event) {
                //alert("I've been clicked");
                //var x = document.getElementById("Q");
                //x.play();
                let keyClickVolume = this.state.volumeLevel;
                if(!this.state.power) {
                    keyClickVolume = 0.0;
                }
                switch (event.target.value) {
                    case (this.state.qValue):
                        var audioClip = new Audio();
                        audioClip.volume = this.state.volumeLevel;
                        //audioClip.volume = 0.0;
                        audioClip.src = this.state.qLink;
                       
                        audioClip.play();
                        this.setState((state, props) => ({
                            displayValue: state.qValue
                        }))
                        break;
                    case (this.state.wValue):
                        var audioClip = new Audio();
                        audioClip.src = this.state.wLink;
                        audioClip.play();
                        this.setState((state, props) => ({
                            displayValue: state.wValue
                        }))
                        break;
                    case (this.state.eValue):
                        var audioClip = new Audio();
                        audioClip.src = this.state.eLink;
                        audioClip.play();
                        this.setState((state, props) => ({
                            displayValue: state.eValue
                        }))
                        break;
                    case (this.state.aValue):
                        var audioClip = new Audio();
                        audioClip.src = this.state.aLink;
                        audioClip.play();
                        this.setState((state, props) => ({
                            displayValue: state.aValue
                        }))
                        break;
                    case (this.state.sValue):
                        var audioClip = new Audio();
                        audioClip.src = this.state.sLink;
                        audioClip.play();
                        this.setState((state, props) => ({
                            displayValue: state.sValue
                        }))
                        break;
                    case (this.state.dValue):
                        var audioClip = new Audio();
                        audioClip.src = this.state.dLink;
                        audioClip.play();
                        this.setState((state, props) => ({
                            displayValue: state.dValue
                        }))
                        break;
                    case (this.state.zValue):
                        var audioClip = new Audio();
                        audioClip.src = this.state.zLink;
                        audioClip.play();
                        this.setState((state, props) => ({
                            displayValue: state.zValue
                        }))
                        break;
                    case (this.state.xValue):
                        var audioClip = new Audio();
                        audioClip.src = this.state.xLink;
                        audioClip.play();
                        this.setState((state, props) => ({
                            displayValue: state.xValue
                        }))
                        break;
                    case (this.state.cValue):
                        var audioClip = new Audio();
                        audioClip.src = this.state.cLink;
                        audioClip.play();
                        this.setState((state, props) => ({
                            displayValue: state.cValue
                        }))
                        break;
                }
            }
            */

            padClick (event) {
                //alert(event.target.id)
                //alert("I've been clicked");
                //var x = document.getElementById("Q");
                //x.play();
                //var wAudio = document.getElementById("W");
                //wAudio.play();
                let padClickVolume = this.state.volumeLevel;
                if(!this.state.power) {
                    padClickVolume = 0.0;
                }
                switch (event.target.id) {
                    case (this.state.qValue):
                    let qPadAudio = document.getElementById("Q");
                        qPadAudio.volume = padClickVolume;
                        qPadAudio.play();
                        this.setState((state, props) => ({
                            displayValue: state.qValue
                        }))
                        break;
                    case (this.state.wValue):
                        let wPadAudio = document.getElementById("W");
                        wPadAudio.volume = padClickVolume;
                        wPadAudio.play();
                        this.setState((state, props) => ({
                            displayValue: state.wValue
                        }))
                        break;
                    case (this.state.eValue):  
                        let ePadAudio = document.getElementById("E");
                        ePadAudio.volume = padClickVolume;
                        ePadAudio.play();
                        this.setState((state, props) => ({
                            displayValue: state.eValue
                        }))
                        break;
                    case (this.state.aValue):
                        let aPadAudio = document.getElementById("A");
                        aPadAudio.volume = padClickVolume;
                        aPadAudio.play();
                        this.setState((state, props) => ({
                            displayValue: state.aValue
                        }))
                        break;
                    case (this.state.sValue):
                        let sPadAudio = document.getElementById("S");
                        sPadAudio.volume = padClickVolume;
                        sPadAudio.play();  
                        this.setState((state, props) => ({
                            displayValue: state.sValue
                        }))
                        break;
                    case (this.state.dValue):
                        let dPadAudio = document.getElementById("D");
                        dPadAudio.volume = padClickVolume;
                        dPadAudio.play();
                        this.setState((state, props) => ({
                            displayValue: state.dValue
                        }))
                        break;
                    case (this.state.zValue):
                        let zPadAudio = document.getElementById("Z");
                        zPadAudio.volume = padClickVolume;
                        zPadAudio.play();
                        this.setState((state, props) => ({
                            displayValue: state.zValue
                        }))
                        break;
                    case (this.state.xValue):
                        let xPadAudio = document.getElementById("X");
                        xPadAudio.volume = padClickVolume;
                        xPadAudio.play();
                        this.setState((state, props) => ({
                            displayValue: state.xValue
                        }))
                        break;
                    case (this.state.cValue):
                        let cPadAudio = document.getElementById("C");
                        cPadAudio.volume = padClickVolume;
                        cPadAudio.play();
                        this.setState((state, props) => ({
                            displayValue: state.cValue
                        }))
                        break;
                }
            }
            keyPressFunction (event) {
                let keyClickVolume = this.state.volumeLevel;
                if(!this.state.power) {
                    keyClickVolume = 0.0;
                }
                switch (event.keyCode){
                    case (81):
                        /* commenting out to testrefferencing audio tag
                        var audioClip = new Audio();
                        audioClip.src = this.state.qLink;
                        audioClip.play();
                        */
                        let qAudio = document.getElementById("Q");
                        qAudio.volume = keyClickVolume;
                        qAudio.play();
                        this.setState((state, props) => ({
                            displayValue: state.qValue
                        }))
                        break;
                    case (87):    
                        let wAudio = document.getElementById("W");
                        wAudio.volume = keyClickVolume;
                        wAudio.play();
                        this.setState((state, props) => ({
                            displayValue: state.wValue
                        }))
                        break;
                    case (69):
                        let eAudio = document.getElementById("E");
                        eAudio.volume = keyClickVolume;
                        eAudio.play();
                        this.setState((state, props) => ({
                            displayValue: state.eValue
                        }))
                        break;
                    case (65):
                        let aAudio = document.getElementById("A");
                        aAudio.volume = keyClickVolume;
                        aAudio.play();
                        this.setState((state, props) => ({
                            displayValue: state.aValue
                        }))
                        break;
                    case (83):
                        let sAudio = document.getElementById("S");
                        sAudio.volume = keyClickVolume;
                        sAudio.play();
                        this.setState((state, props) => ({
                            displayValue: state.sValue
                        }))
                        break;
                    case (68):
                        let dAudio = document.getElementById("D");
                        dAudio.volume = keyClickVolume;
                        dAudio.play();                       
                        this.setState((state, props) => ({
                            displayValue: state.dValue
                        }))
                        break;
                    case (90):
                        let zAudio = document.getElementById("Z");
                        zAudio.volume = keyClickVolume;
                        zAudio.play();
                        this.setState((state, props) => ({
                            displayValue: state.zValue
                        }))
                        break;
                    case (88):
                        let xAudio = document.getElementById("X");
                        xAudio.volume = keyClickVolume;
                        xAudio.play();
                        this.setState((state, props) => ({
                            displayValue: state.xValue
                        }))
                        break;
                    case (67):
                        let cAudio = document.getElementById("C");
                        cAudio.volume = keyClickVolume;
                        cAudio.play();
                        this.setState((state, props) => ({
                            displayValue: state.cValue
                        }))
                        break;
                }
                
            }
            /*
            setInstrument (event) {
                this.setState((state,props) =>({
                    instrumentIndex: 1
                }));
            }
            */
            render() {

                return (
                    
                    <div id="drum-machine"> 
                        <div id="display">{this.state.displayValue}</div>
                        <div id="buttons" class="grid-container">
                            <div class="item1 drum-pad" id={this.state.qValue} >
                                <audio class="clip" id="Q" src={this.state.qLink}></audio>
                                Q
                            </div>
                            <div class="item2 drum-pad" id={this.state.wValue}>
                                <audio class="clip" id="W" src={this.state.wLink}></audio>  
                                W                            
                            </div>
                            <div class="item3 drum-pad" id={this.state.eValue}>
                                <audio class="clip" id="E" src={this.state.eLink}></audio>        
                                E                      
                            </div>
                            <div class="item4 drum-pad" id={this.state.aValue}>
                                <audio class="clip" id="A" src={this.state.aLink}></audio>    
                                A                         
                            </div>
                            <div class="item5 drum-pad" id={this.state.sValue}>
                                <audio class="clip" id="S" src={this.state.sLink}></audio>       
                                S                       
                            </div>
                            <div class="item6 drum-pad" id={this.state.dValue}>
                                <audio class="clip" id="D" src={this.state.dLink}></audio>         
                                D                      
                            </div>
                            <div class="item7 drum-pad" id={this.state.zValue}>
                                <audio class="clip" id="Z" src={this.state.zLink}></audio>   
                                Z                           
                            </div>
                            <div class="item8 drum-pad" id={this.state.xValue}>
                                <audio class="clip" id="X" src={this.state.xLink}></audio>          
                                X                    
                            </div>
                            <div class="item9 drum-pad" id={this.state.cValue}>
                                <audio class="clip" id="C" src={this.state.cLink}></audio>          
                                C                   
                            </div>
                            
                        </div>
        
                        { /* Change code above this line */}
                        {/*code below is for testing variables */}

                        <h4>Controlled Input:</h4>
                        <p>power:{this.state.power}</p>

                        
                        <p>bank:{this.state.bank}</p>
                        <p>volume:{this.state.volumeDisplay}</p>
                        <p>Chord:{this.state.chord}</p>

                        <h2>Mute</h2>
                        <div id="powerButton" class={this.state.powerClass} />
                        
                        
                        <input id="volumeControl" type="range" min="0" max="100" step="1" onInput={this.setVolume} onChange={this.setVolume}></input>
                      
                            <div class="container">
                                <div class="dropdown w-50">
                                    <button type="button" class="btn btn-primary dropdown-toggle w-100" data-toggle="dropdown">
                                    Dropdown button
                                    </button>
                                    <div class="dropdown-menu w-100">
                                        <a class="dropdown-item" id="drums" onClick={this.testFunction}>Drums</a>
                                        <a class="dropdown-item" id="piano" >Piano</a>
                                        <a class="dropdown-item" id="flute" >Flute</a>
                                    </div>
                                </div>
                            </div>

                    </div>
                    
                );

            }

        }
        
        ReactDOM.render(<DrumMachine />, document.getElementById('drumBody'))
    </script>

  </body>
</html>